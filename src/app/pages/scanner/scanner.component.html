<!-- Scanner con propiedades vÃ¡lidas solamente -->
<zxing-scanner 
  #scanner
  [formats]="formats"
  [device]="selectedDevice"
  [torch]="torchOn"
  [enable]="true"
  (camerasFound)="onCamerasFound($event)"
  (hasDevices)="onHasDevices($event)"
  (scanSuccess)="onScanSuccess($event)"
  (scanError)="onScanError($event)"
  (torchCompatible)="onTorchCompatible($event)"
  (permissionResponse)="onPermissionResponse($event)">
</zxing-scanner>

<section class="result">
  <h3>Lectura</h3>
  <div *ngIf="lastResult; else noResult">
    <p><b>âœ… CÃ³digo VÃ¡lido:</b> <code>{{ lastResult }}</code></p>
  </div>
  <ng-template #noResult>
    <p class="muted">ğŸ” Buscando cÃ³digos vÃ¡lidos (B######-STR-####-#)...</p>
  </ng-template>
  <p *ngIf="lastIgnored" class="warn">
    âš ï¸ Descartado: <code>{{ lastIgnored }}</code> (formato no vÃ¡lido)
  </p>
</section>

<!-- Controles -->
<div class="controls" *ngIf="devices.length > 0">
  <!-- BotÃ³n de flash -->
  <button (click)="toggleTorch()" class="control-btn" *ngIf="torchAvailable">
    {{ torchOn ? 'ğŸ”¦' : 'ğŸ’¡' }} Flash
  </button>
  
  <!-- Selector de cÃ¡mara -->
  <select (change)="onDeviceSelectChange($event)" class="camera-select" *ngIf="devices.length > 1">
    <option *ngFor="let device of devices; let i = index" 
            [value]="i" 
            [selected]="device === selectedDevice">
      ğŸ“· {{ device.label || 'CÃ¡mara ' + (i + 1) }}
    </option>
  </select>
  
  <!-- BotÃ³n de logout -->
  <button (click)="logout()" class="control-btn logout">
    ğŸšª Salir
  </button>
</div>